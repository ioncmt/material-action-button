{"version":3,"sources":["ion-action-button.js"],"names":["actionButtonFactory","$rootScope","$compile","$ionicBody","$animate","$ionicTabsDelegate","actionButton","options","scope","$new","visible","removeOnStateChange","bottom","hasTab","menuBottom","menuOpened","mainButtonElement","secondaryButtonsContainer","element","append","remove","$destroy","removeButton","removed","addClass","then","buttonClicked","data","type","openMenu","mainAction","onClick","ngEvent","removeClass","buttons","index","show","angular","getElementsByClassName","startHidden","showButton","hideButton","unSubscribeStateChangeEvent","$on","hide","create","module","factory","component","templateUrl","bindings","dispatcher","onCreate","controller","$timeout","_this","this","closeMenu","$postLink","length","run","$templateCache","put"],"mappings":"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","file":"../ion-action-button.js","sourcesContent":["/**\r\n * Private method doing the factory\r\n */\r\nfunction actionButtonFactory($rootScope, $compile, $ionicBody, $animate, $ionicTabsDelegate) {\r\n  return {\r\n    create: actionButton\r\n  };\r\n\r\n  function actionButton(options) {\r\n    var scope = $rootScope.$new(true);\r\n    var visible = true;\r\n    scope.options = options;\r\n    scope.options.removeOnStateChange = true;\r\n    scope.options.bottom = scope.options.hasTab ? '55px' : '15px';\r\n    scope.options.menuBottom = scope.options.hasTab ? '115px' : '90px';\r\n    scope.menuOpened = false;\r\n    // Compile the template\r\n    var element = scope.element = $compile(\r\n      '<material-action-button on-create=\"show()\" options=\"options\" dispatcher=\"buttonClicked(data)\"></material-action-button>'\r\n    )(scope);\r\n    var mainButtonElement;\r\n    var secondaryButtonsContainer;\r\n    //append to the body\r\n    $ionicBody.append(element);\r\n    var remove = function() {\r\n      visible = false;\r\n      scope.$destroy();\r\n      element.remove();\r\n    };\r\n    /**\r\n     * Button remove\r\n     */\r\n    scope.removeButton = function() {\r\n      if (scope.removed) {\r\n        return;\r\n      }\r\n      scope.removed = true;\r\n      if (mainButtonElement) {\r\n        return $animate.addClass(mainButtonElement, 'action-button-hide').then(function() {\r\n          remove();\r\n          return;\r\n        });\r\n      } else {\r\n        remove();\r\n      }\r\n    };\r\n    /**\r\n     * Button clicked\r\n     */\r\n    scope.buttonClicked = function(data) {\r\n      //we handle main button clicks\r\n      if (data.type === 'main') {\r\n        //if we have secondary actions...\r\n        if (data.openMenu) {\r\n          //if menu is opened, we close it\r\n          if (scope.menuOpened) {\r\n            element.removeClass('action-button-menu-show');\r\n            element.addClass('action-button-menu-hide');\r\n            $animate.addClass(secondaryButtonsContainer, 'action-button-small-hide').then(function() {\r\n              secondaryButtonsContainer.removeClass('action-button-small-show');\r\n              secondaryButtonsContainer.removeClass('action-button-small-hide');\r\n              secondaryButtonsContainer.addClass('action-button-small-container__hidden');\r\n              scope.menuOpened = false;\r\n            });\r\n          } else {\r\n            //if menu is closed, we open it\r\n            element.removeClass('action-button-menu-hide');\r\n            element.addClass('action-button-menu-show');\r\n            secondaryButtonsContainer.removeClass('action-button-small-container__hidden');\r\n            $animate.addClass(secondaryButtonsContainer, 'action-button-small-show').then(function() {\r\n              scope.menuOpened = true;\r\n            });\r\n          }\r\n        } else {\r\n          //if we don't have secondary actions\r\n          if (scope.options.mainAction.onClick) {\r\n            return scope.options.mainAction.onClick(data.ngEvent);\r\n          }\r\n          return;\r\n        }\r\n      }\r\n      if (data.type === 'secondary') {\r\n        if (scope.options.buttons[data.index].onClick) {\r\n          return scope.options.buttons[data.index].onClick(data.ngEvent, data.index);\r\n        }\r\n        return;\r\n      }\r\n    };\r\n    /**\r\n     * Show the menu\r\n     */\r\n    scope.show = function() {\r\n      $animate.addClass(element, 'button-active') //hack to wait till the element is appended? dont know...\r\n        .then(function() {\r\n          visible = true;\r\n          mainButtonElement = angular.element(element[0].getElementsByClassName('action-button'));\r\n          secondaryButtonsContainer = angular.element(element[0].getElementsByClassName(\r\n            'action-button-small-container'));\r\n          if (scope.options.startHidden) {\r\n            return;\r\n          }\r\n          return $animate.addClass(mainButtonElement, 'action-button-show');\r\n        });\r\n    };\r\n    scope.showButton = function() {\r\n      return $animate.addClass(mainButtonElement, 'action-button-show').then(function() {\r\n        visible = true;\r\n        return;\r\n      });\r\n    };\r\n    scope.hideButton = function() {\r\n      return $animate.addClass(mainButtonElement, 'action-button-hide').then(function() {\r\n        mainButtonElement.removeClass('action-button-show');\r\n        mainButtonElement.removeClass('action-button-hide');\r\n        element.removeClass('action-button-menu-hide');\r\n        visible = false;\r\n        return;\r\n      });\r\n    };\r\n    //auto remove when state changes\r\n    var unSubscribeStateChangeEvent = $rootScope.$on('$stateChangeStart', function() {\r\n      if (scope.options.removeOnStateChange) {\r\n        scope.removeButton();\r\n        unSubscribeStateChangeEvent();\r\n        return;\r\n      }\r\n    });\r\n    return {\r\n      show: function() {\r\n        return scope.showButton();\r\n      },\r\n      hide: function() {\r\n        return scope.hideButton();\r\n      },\r\n      visible: function() {\r\n        return visible;\r\n      }\r\n    };\r\n  }\r\n}\r\n/**\r\n * Action Button module is initialized here\r\n */\r\nangular.module('$actionButton', ['ngAnimate'])\r\n  .factory('$actionButton', [\r\n    '$rootScope',\r\n    '$compile',\r\n    '$ionicBody',\r\n    '$animate',\r\n    '$ionicTabsDelegate',\r\n    actionButtonFactory\r\n  ])\r\n  .component('materialActionButton', {\r\n    templateUrl: 'template.html',\r\n    bindings: {\r\n      options: '<',\r\n      dispatcher: '&',\r\n      onCreate: '&'\r\n    },\r\n    controller: [\r\n      '$timeout',\r\n      function($timeout) {\r\n        var _this = this;\r\n        // this.opened = false;\r\n        this.closeMenu = function(data) {\r\n          //we simulate a main button touch order to close\r\n          data.openMenu = true;\r\n          _this.dispatcher({\r\n            data: data\r\n          });\r\n          return;\r\n        };\r\n        this.$postLink = function() {\r\n          $timeout(function() {\r\n            _this.onCreate();\r\n          });\r\n        };\r\n        this.buttonClicked = function(data) {\r\n          //if the element has no buttons configured...\r\n          if (!_this.options.buttons || !_this.options.buttons.length) {\r\n            _this.dispatcher({\r\n              data: data\r\n            });\r\n            return;\r\n          }\r\n          //if the element has buttons configured...\r\n          //we pass the openMenu true prop...\r\n          if (data.type === 'main') {\r\n            data.openMenu = true;\r\n            _this.dispatcher({\r\n              data: data\r\n            });\r\n            return;\r\n          }\r\n          //any other click here has to be from a small button\r\n          _this.dispatcher({\r\n            data: data\r\n          });\r\n        };\r\n      }\r\n    ]\r\n  });\nangular.module(\"$actionButton\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"template.html\",\"<div ng-animate-children=\\\"true\\\">\\r\\n\t<div class=\\\"action-button-small-container\\\" ng-click=\\\"$ctrl.closeMenu({type: \\'main\\', backgroundClick: true})\\\" ng-style=\\\"{\\'padding-bottom\\':$ctrl.options.menuBottom}\\\">\\r\\n\t\t<div class=\\\"action-button-small-container--individual\\\" ng-repeat=\\\"button in $ctrl.options.buttons\\\" ng-attr-id=\\\"{{button.id}}\\\" ng-click=\\\"$ctrl.buttonClicked({ngEvent:$event, type: \\'secondary\\', index: $index})\\\">\\r\\n\t\t\t<span class=\\\"action-button-small--label\\\" ng-if=\\\"button.label\\\">{{button.label}}</span>\\r\\n\t\t\t<button ng-attr-id=\\\"{{button.id}}\\\" class=\\\"action-button-small\\\" ng-class=\\\"{\\'destructive\\': button.destructive}\\\">\\r\\n\t\t\t\t<i class=\\\"action-button-small--icon icon\\\" ng-class=\\\"button.icon\\\"><span class=\\\"action-button-small--icon__label\\\" ng-if=\\\"!button.icon\\\">{{button.letter || button.label[0]}}</span></i>\\r\\n\t\t\t</button>\\r\\n\t\t</div>\\r\\n\t</div>\\r\\n\t<button ng-attr-id=\\\"{{$ctrl.options.mainAction.id}}\\\" class=\\\"action-button\\\" ng-click=\\\"$ctrl.buttonClicked({ngEvent:$event, type: \\'main\\'})\\\" ng-style=\\\"{bottom:$ctrl.options.bottom}\\\">\\r\\n\t\t<i class=\\'action-button--icon icon action-button--icon__main\\' ng-class=\\\"$ctrl.options.mainAction.icon\\\"></i>\\r\\n\t\t<i class=\\'action-button--icon action-button-icon__close\\' ng-class=\\\"$ctrl.options.mainAction.closeIcon\\\"></i>\\r\\n\t</button>\\r\\n</div>\\r\\n\");}]);"]}